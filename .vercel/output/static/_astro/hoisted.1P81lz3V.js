import{n as f}from"./router.Cas-jtPn.js";let s="";const y=document.querySelector("#upload-event"),g=document.getElementById("name");g&&g.addEventListener("input",t=>{s=t.target.value});y&&y.addEventListener("clduploadwidget:success",t=>{const n=t.detail.info.public_id;s!==""?f(`/photo?id=${n}&name=${s}`):f(`/photo?id=${n}&name=${s}`)});async function m(t){try{const n=await fetch(t.src);return n.status===423?(await new Promise(o=>setTimeout(o,500)),await m(t)):n.ok}catch{return!1}}document.addEventListener("error",h,!0);async function h(t){const n=t.target;if(!n||n.tagName!=="IMG")return;const o=new CustomEvent("cldimage:error",{detail:{Image:n,type:"error"}});if(n?.dispatchEvent(o),await m({src:n.src})){const e=`${Date.now()}${Math.random()}`;n.src.includes("?")?n.src=`${n.src}?key=${e}`:n.src=`${n.src}&key=${e}`}}function v(t){return window&&"requestIdleCallback"in window?requestIdleCallback(t):setTimeout(()=>t(),1)}function w(t){return new Promise((n,o)=>{typeof document>"u"&&o("Can not be loaded on");const e=document.createElement("script");e.src=t,e.async=!0,document.body.appendChild(e);function a(){d(),n({script:e})}function r(){d(),o({script:e})}e.addEventListener("load",a),e.addEventListener("error",r);function d(){e.removeEventListener("load",a),e.removeEventListener("error",r)}})}window.addEventListener("load",async()=>{const t=document.querySelectorAll(".astro-cloudinary-cldvideoplayer");if(t.length===0||((!("cloudinary"in window)||typeof window.cloudinary.videoPlayer!="function")&&await w("https://unpkg.com/cloudinary-video-player@2.1.0/dist/cld-video-player.min.js"),!("cloudinary"in window)))return;const n=window.cloudinary;t.forEach(o=>{const e=o.dataset.cldvideoplayerOptions&&JSON.parse(o.dataset.cldvideoplayerOptions),a=n.videoPlayer(o,e);if(!a)return;["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange","fullscreenchange","posterchange","mute","unmute","percentsplayed","timeplayed","seek","sourcechanged","qualitychanged"].forEach(d=>{a.on(d,c=>{const l=new CustomEvent(`cldvideoplayer:${d}`,{detail:{Player:c.Player,type:c.type,Video:o}});o.closest(`#${o.dataset.cldvideoplayerId}`)?.dispatchEvent(l)})})})});var E={abort:"onAbort","batch-cancelled":"onBatchCancelled",close:"onClose","display-changed":"onDisplayChanged",publicid:"onPublicId","queues-end":"onQueuesEnd","queues-start":"onQueuesStart",retry:"onRetry","show-completed":"onShowCompleted","source-changed":"onSourceChanged",success:"onSuccess",tags:"onTags","upload-added":"onUploadAdded"};function C(t){return function(o,e){o&&typeof t.onError=="function"&&t.onError(o,e),typeof t.onResult=="function"&&t.onResult(e);const a=typeof e?.event=="string"&&E[e.event];if(typeof a=="string"&&typeof t[a]=="function"){const r=t[a];r(e)}}}function S({signatureEndpoint:t,fetch:n}){return function(e,a){if(typeof t>"u")throw Error("Failed to generate signature: signatureEndpoint property undefined.");if(typeof n>"u")throw Error("Failed to generate signature: fetch property undefined.");n(t,{method:"POST",body:JSON.stringify({paramsToSign:a}),headers:{"Content-Type":"application/json"}}).then(r=>r.json()).then(r=>{e(r.signature)}).catch(r=>{e(null,r)})}}window.addEventListener("load",async()=>{const t=document.querySelectorAll(".astro-cloudinary-clduploadwidget");if(t.length===0||((!("cloudinary"in window)||typeof window.cloudinary.createUploadWidget!="function")&&await w("https://upload-widget.cloudinary.com/global/all.js"),!("cloudinary"in window)))return;const n=window.cloudinary;t.forEach(o=>{let e;const a=o.querySelector("button");if(!a)return;a.addEventListener("click",i=>{e||(e=p()),e.open()});const r=o.dataset.clduploadwidgetuploadOptions&&JSON.parse(o.dataset.clduploadwidgetuploadOptions),d=o.dataset.clduploadwidgetuploadSignatureendpoint,c=d&&S({signatureEndpoint:String(d),fetch}),l=C({onError:i=>{const u=new CustomEvent("clduploadwidget:error",{detail:{event:"error",error:i,UploadWidget:o}});o?.dispatchEvent(u)},onResult:i=>{if(typeof i?.event!="string")return;const u=new CustomEvent(`clduploadwidget:${i?.event}`,{detail:{event:i.event,info:i.info,UploadWidget:e}});o?.dispatchEvent(u)}});v(()=>{e||(e=p())});function p(){return n.createUploadWidget({...r,uploadSignature:c},l)}})});
