---
import Layout from "../layouts/Layout.astro";

import OriginalImageSection from "@components/OriginalImageSection.astro";
import StorySection from "@components/StorySection.astro";
import OptionsSection from "@components/OptionsSection.astro";

import { getRandomName } from "src/utils/get-random-name";

const { searchParams } = Astro.url;
const id = searchParams.get("id");
if (id === null) return Astro.redirect("/404?reason=ID");

let name = searchParams.get("name");
if (name === null) name = getRandomName();

---

<Layout title="Welcome to Astro">
  <OriginalImageSection server:defer id={id} />
  <StorySection  id={id} name={name} />
  <OptionsSection />
</Layout>


